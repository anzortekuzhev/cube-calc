<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—Å—Ä–æ—á–∫–∏ CUBE</title>
  <style>
    @font-face {
      font-family: 'SF Pro Text';
      src: local('SF Pro Text'), local('San Francisco');
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(90deg, #000000, #737373);
      color: white;
      display: flex;
      justify-content: center;
    }
    .container {
      max-width: 420px;
      width: 100%;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      font-size: 26px;
      text-align: center;
    }
    label {
      font-size: 14px;
      display: block;
      margin-top: 14px;
      align-self: flex-start;
    }
    input[type="number"], select {
      width: 100%;
      padding: 10px;
      font-size: 14px;
      border-radius: 30px;
      border: 2px solid #D9D9D9;
      background: transparent;
      color: white;
    }
    input[type="range"] {
      width: 100%;
      height: 6px;
      margin-top: 5px;
      border-radius: 5px;
      background: #e8d7c9;
      outline: none;
      appearance: none;
      transition: background 450ms ease-in;
    }
    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: white;
      cursor: pointer;
    }
    .result {
      margin-top: 20px;
      background: rgba(255, 255, 255, 0.1);
      padding: 16px;
      border-radius: 20px;
      font-size: 14px;
      width: 100%;
    }
    .whatsapp-button {
      margin-top: 20px;
      background-color: #25D366;
      padding: 12px 20px;
      border-radius: 30px;
      font-weight: bold;
      color: white;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .whatsapp-button img {
      width: 18px;
      height: 18px;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—Å—Ä–æ—á–∫–∏</h1>


    <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä:</label>
    <select id="product">
      <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
      <optgroup label="–¢–µ—Ö–Ω–∏–∫–∞ Apple">
  <optgroup label="iPhone">
    <optgroup label="iPhone 16 Pro Max">
      <option value="144900">iPhone 16 Pro Max 1TB ‚Äî 144 900 ‚ÇΩ</option>
      <option value="134900">iPhone 16 Pro Max 512gb ‚Äî 134 900 ‚ÇΩ</option>
      <option value="114900">iPhone 16 Pro Max 256gb ‚Äî 114 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPhone 16 Pro">
      <option value="139900">iPhone 16 Pro 1TB ‚Äî 139 900 ‚ÇΩ</option>
      <option value="124900">iPhone 16 Pro 512gb ‚Äî 124 900 ‚ÇΩ</option>
      <option value="104900">iPhone 16 Pro 256gb ‚Äî 104 900 ‚ÇΩ</option>
      <option value="94900">iPhone 16 Pro 128gb ‚Äî 94 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPhone 16 Plus">
      <option value="87900">iPhone 16 Plus 256gb ‚Äî 87 900 ‚ÇΩ</option>
      <option value="77900">iPhone 16 Plus 128gb ‚Äî 77 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPhone 16">
      <option value="77900">iPhone 16 256gb ‚Äî 77 900 ‚ÇΩ</option>
      <option value="67900">iPhone 16 128gb ‚Äî 67 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPhone 16E">
      <option value="54900">iPhone 16E 128gb ‚Äî 54 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPhone 15">
      <option value="66900">iPhone 15 Plus 128gb ‚Äî 66 900 ‚ÇΩ</option>
      <option value="72900">iPhone 15 256gb ‚Äî 72 900 ‚ÇΩ</option>
      <option value="61900">iPhone 15 128gb ‚Äî 61 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPhone 14">
      <option value="61900">iPhone 14 256gb ‚Äî 61 900 ‚ÇΩ</option>
      <option value="54900">iPhone 14 128gb ‚Äî 54 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPhone 13">
      <option value="46900">iPhone 13 128gb ‚Äî 46 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPhone 12">
      <option value="44900">iPhone 12 128gb ‚Äî 44 900 ‚ÇΩ</option>
      <option value="39900">iPhone 12 64gb ‚Äî 39 900 ‚ÇΩ</option>
    </optgroup>
  </optgroup>
  <optgroup label="iPad">
    <optgroup label="iPad Pro">
      <option value="129900">iPad Pro M4 13‚Ä≥ 256gb Cellular ‚Äî 129 900 ‚ÇΩ</option>
      <option value="109900">iPad Pro M4 13‚Ä≥ 256gb Wi-Fi ‚Äî 109 900 ‚ÇΩ</option>
      <option value="115900">iPad Pro M4 11‚Ä≥ 512gb Wi-Fi ‚Äî 115 900 ‚ÇΩ</option>
      <option value="89900">iPad Pro M4 11‚Ä≥ 256gb Wi-Fi ‚Äî 89 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPad Air">
      <option value="79900">iPad Air 6 13‚Ä≥ M2 128gb Wi-Fi ‚Äî 79 900 ‚ÇΩ</option>
      <option value="66900">iPad Air 6 11‚Ä≥ M2 256gb Wi-Fi ‚Äî 66 900 ‚ÇΩ</option>
      <option value="64900">iPad Air 7 11‚Ä≥ M3 128gb Wi-Fi ‚Äî 64 900 ‚ÇΩ</option>
      <option value="56900">iPad Air 6 11‚Ä≥ M2 128gb Wi-Fi ‚Äî 56 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPad 11">
      <option value="52900">iPad 11 256gb Wi-Fi ‚Äî 52 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPad 10">
      <option value="47900">iPad 10 256gb Wi-Fi ‚Äî 47 900 ‚ÇΩ</option>
      <option value="36900">iPad 10 64gb Wi-Fi ‚Äî 36 900 ‚ÇΩ</option>
    </optgroup>
    <optgroup label="iPad mini 7">
      <option value="49900">iPad mini 7 128gb Wi-Fi ‚Äî 49 900 ‚ÇΩ</option>
    </optgroup>
  </optgroup>
  <optgroup label="MacBook">
    <option value="185900">MacBook Pro 14‚Ä≥ M4 Pro 24/512gb ‚Äî 185 900 ‚ÇΩ</option>
    <option value="134900">MacBook Air 15‚Ä≥ M3 16/256gb ‚Äî 134 900 ‚ÇΩ</option>
    <option value="125900">MacBook Air 15‚Ä≥ M3 8/256gb ‚Äî 125 900 ‚ÇΩ</option>
    <option value="125900">MacBook Air 13.6‚Ä≥ M3 16/512gb ‚Äî 125 900 ‚ÇΩ</option>
    <option value="107900">MacBook Air 13.6‚Ä≥ M3 16/256gb ‚Äî 107 900 ‚ÇΩ</option>
    <option value="97900">MacBook Air 13.6‚Ä≥ M3 8/256gb ‚Äî 97 900 ‚ÇΩ</option>
    <option value="87900">MacBook Air 13.6‚Ä≥ M2 16/256gb ‚Äî 87 900 ‚ÇΩ</option>
    <option value="84900">MacBook Air 13.6‚Ä≥ M2 8/256gb ‚Äî 84 900 ‚ÇΩ</option>
    <option value="67900">MacBook Air 13‚Ä≥ M1 8/256gb ‚Äî 67 900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="iMac">
    <option value="149900">iMac 24‚Ä≥ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ M4 ‚Äî –æ—Ç 149 900 ‚ÇΩ</option>
  </optgroup>
</optgroup>
<optgroup label="Apple Watch">
  <option value="74900">Apple Watch Ultra 2 49mm Black ‚Äî 74 900 ‚ÇΩ</option>
  <option value="72900">Apple Watch Ultra 2 49mm ‚Äî 72 900 ‚ÇΩ</option>
  <option value="39900">Apple Watch 10 46mm ‚Äî 39 900 ‚ÇΩ</option>
  <option value="37900">Apple Watch 10 42mm ‚Äî 37 900 ‚ÇΩ</option>
  <option value="33900">Apple Watch 9 45mm ‚Äî 33 900 ‚ÇΩ</option>
  <option value="26900">Apple Watch SE 44mm 2024 ‚Äî 26 900 ‚ÇΩ</option>
  <option value="24900">Apple Watch SE 40mm 2024 ‚Äî 24 900 ‚ÇΩ</option>
  <option value="24900">Apple Watch SE 44mm 2023 ‚Äî 24 900 ‚ÇΩ</option>
  <option value="22900">Apple Watch SE 44mm 2022 ‚Äî 22 900 ‚ÇΩ</option>
</optgroup>
<optgroup label="AirPods">
  <option value="49900">AirPods Max 2024 ‚Äî 49 900 ‚ÇΩ</option>
  <option value="17900">AirPods 4 ANC ‚Äî 17 900 ‚ÇΩ</option>
  <option value="19900">AirPods Pro 2 ‚Äî 19 900 ‚ÇΩ</option>
  <option value="13900">AirPods 4 ‚Äî 13 900 ‚ÇΩ</option>
  <option value="13900">AirPods 3 ‚Äî 13 900 ‚ÇΩ</option>
  <option value="10900">AirPods 2 ‚Äî 10 900 ‚ÇΩ</option>
</optgroup>
<optgroup label="–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã">
  <option value="11900">Apple Magic Mouse 3 ‚Äî 11 900 ‚ÇΩ</option>
  <option value="14900">Apple Pencil Pro ‚Äî 14 900 ‚ÇΩ</option>
  <option value="10900">Apple Pencil 2 ‚Äî 10 900 ‚ÇΩ</option>
  <option value="29900">Apple Magic Keyboard iPad 11‚Ä≥ ‚Äî 29 900 ‚ÇΩ</option>
  <option value="33900">Apple Magic Keyboard iPad 13‚Ä≥ ‚Äî 33 900 ‚ÇΩ</option>
</optgroup>
<optgroup label="Samsung">
  <optgroup label="S-—Å–µ—Ä–∏—è">
    <option value="104900">Samsung S25 Ultra 12/512gb ‚Äî 104‚ÄØ900 ‚ÇΩ</option>
    <option value="94900">Samsung S25 Ultra 12/256gb ‚Äî 94‚ÄØ900 ‚ÇΩ</option>
    <option value="79900">Samsung S25 Plus 12/256gb ‚Äî 79‚ÄØ900 ‚ÇΩ</option>
    <option value="74900">Samsung S25 12/256gb ‚Äî 74‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="S24-—Å–µ—Ä–∏—è">
    <option value="89900">Samsung S24 Ultra 12/512gb ‚Äî 89‚ÄØ900 ‚ÇΩ</option>
    <option value="79900">Samsung S24 Ultra 12/256gb ‚Äî 79‚ÄØ900 ‚ÇΩ</option>
    <option value="55900">Samsung S24 8/128gb ‚Äî 55‚ÄØ900 ‚ÇΩ</option>
    <option value="45900">Samsung S24 FE 8/256gb ‚Äî 45‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="S23">
    <option value="49900">Samsung S23 128gb ‚Äî 49‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="A-—Å–µ—Ä–∏—è">
    <option value="37900">Samsung A56 8/256gb ‚Äî 37‚ÄØ900 ‚ÇΩ</option>
    <option value="34900">Samsung A56 8/128gb ‚Äî 34‚ÄØ900 ‚ÇΩ</option>
    <option value="34900">Samsung A55 8/256gb ‚Äî 34‚ÄØ900 ‚ÇΩ</option>
    <option value="29900">Samsung A55 8/128gb ‚Äî 29‚ÄØ900 ‚ÇΩ</option>
    <option value="24900">Samsung A54 8/128gb ‚Äî 24‚ÄØ900 ‚ÇΩ</option>
    <option value="33900">Samsung A36 8/256gb ‚Äî 33‚ÄØ900 ‚ÇΩ</option>
    <option value="31900">Samsung A36 8/128gb ‚Äî 31‚ÄØ900 ‚ÇΩ</option>
    <option value="27900">Samsung A35 8/256gb ‚Äî 27‚ÄØ900 ‚ÇΩ</option>
    <option value="25900">Samsung A35 8/128gb ‚Äî 25‚ÄØ900 ‚ÇΩ</option>
    <option value="19900">Samsung A25 6/128gb ‚Äî 19‚ÄØ900 ‚ÇΩ</option>
    <option value="15900">Samsung A24 4/128gb ‚Äî 15‚ÄØ900 ‚ÇΩ</option>
    <option value="15900">Samsung A16 6/128gb ‚Äî 15‚ÄØ900 ‚ÇΩ</option>
    <option value="14900">Samsung A16 4/128gb ‚Äî 14‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
</optgroup>
<optgroup label="–¢–µ—Ö–Ω–∏–∫–∞ Xiaomi">
  <optgroup label="Poco">
    <option value="35900">Poco X7 Pro 12/512gb ‚Äî 35‚ÄØ900 ‚ÇΩ</option>
    <option value="31900">Poco X7 Pro 8/256gb ‚Äî 31‚ÄØ900 ‚ÇΩ</option>
    <option value="19900">Poco F4 6/128gb ‚Äî 19‚ÄØ900 ‚ÇΩ</option>
    <option value="29900">Poco X6 Pro 12/512gb ‚Äî 29‚ÄØ900 ‚ÇΩ</option>
    <option value="23900">Poco X5 Pro 8/256gb ‚Äî 23‚ÄØ900 ‚ÇΩ</option>
    <option value="19900">Poco X5 Pro 6/128gb ‚Äî 19‚ÄØ900 ‚ÇΩ</option>
    <option value="19900">Poco X5 8/256gb ‚Äî 19‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="Redmi Note 14">
    <option value="34900">Redmi Note 14 Pro Plus 8/256gb ‚Äî 34‚ÄØ900 ‚ÇΩ</option>
    <option value="29900">Redmi Note 14 Pro 12/512gb ‚Äî 29‚ÄØ900 ‚ÇΩ</option>
    <option value="25900">Redmi Note 14 Pro 8/256gb ‚Äî 25‚ÄØ900 ‚ÇΩ</option>
    <option value="18900">Redmi Note 14 8/256gb ‚Äî 18‚ÄØ900 ‚ÇΩ</option>
    <option value="16900">Redmi Note 14 8/128gb ‚Äî 16‚ÄØ900 ‚ÇΩ</option>
    <option value="14900">Redmi Note 14 6/128gb ‚Äî 14‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="Redmi Note 13">
    <option value="24900">Redmi Note 13 Pro 12/256gb ‚Äî 24‚ÄØ900 ‚ÇΩ</option>
    <option value="19900">Redmi Note 13 Pro 8/256gb ‚Äî 19‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="Redmi Note 12 / 11">
    <option value="12900">Redmi Note 12 6/128gb ‚Äî 12‚ÄØ900 ‚ÇΩ</option>
    <option value="14900">Redmi Note 11 Pro 8/128gb ‚Äî 14‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="Redmi 14C">
    <option value="12900">Redmi 14C 8/256gb ‚Äî 12‚ÄØ900 ‚ÇΩ</option>
    <option value="9900">Redmi 14C 4/128gb ‚Äî 9‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="Redmi Pad">
    <option value="29900">–ü–ª–∞–Ω—à–µ—Ç Redmi Pad Pro 12‚Ä≤ 8/256gb ‚Äî 29‚ÄØ900 ‚ÇΩ</option>
    <option value="18900">–ü–ª–∞–Ω—à–µ—Ç Redmi Pad SE 6/128gb ‚Äî 18‚ÄØ900 ‚ÇΩ</option>
    <option value="20900">–ü–ª–∞–Ω—à–µ—Ç Redmi Pad SE 8/256gb ‚Äî 20‚ÄØ900 ‚ÇΩ</option>
    <option value="15900">–ü–ª–∞–Ω—à–µ—Ç Redmi Pad SE 8.7 4/128gb ‚Äî 15‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
</optgroup>
<optgroup label="–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞">
  <optgroup label="–ü—ã–ª–µ—Å–æ—Å—ã">
    <option value="68900">–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –ø—ã–ª–µ—Å–æ—Å Dyson Gen5 Detect Absolute (SV23) ‚Äî 68‚ÄØ900 ‚ÇΩ</option>
    <option value="44900">–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –ø—ã–ª–µ—Å–æ—Å Roborock Dyad Pro Combo ‚Äî 44‚ÄØ900 ‚ÇΩ</option>
    <option value="34900">–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –ø—ã–ª–µ—Å–æ—Å Roborock Flexi Pro ‚Äî 34‚ÄØ900 ‚ÇΩ</option>
    <option value="26900">–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –ø—ã–ª–µ—Å–æ—Å Roborock Flexi Lite ‚Äî 26‚ÄØ900 ‚ÇΩ</option>
    <option value="22900">–†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å Xiaomi Robot Vacuum S12 ‚Äî 22‚ÄØ900 ‚ÇΩ</option>
    <option value="13900">–†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å Xiaomi Mijia G1 ‚Äî 13‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="PlayStation">
    <option value="79900">Sony PlayStation 5 Pro 2TB ‚Äî 79‚ÄØ900 ‚ÇΩ</option>
    <option value="53900">Sony PlayStation 5 Slim ‚Äî 53‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
  <optgroup label="–£–∫–ª–∞–¥–∫–∞ –∏ —É—Ö–æ–¥ Dyson">
   <optgroup label="–í—ã–ø—Ä—è–º–∏—Ç–µ–ª–∏ Dyson">
    <option value="49900">Dyson AirStrait HT01 Blue Copper ‚Äî 49‚ÄØ900 ‚ÇΩ</option>
    <option value="49900">Dyson AirStrait HT01 Red Velvet Gold ‚Äî 49‚ÄØ900 ‚ÇΩ</option>
    <option value="49900">Dyson AirStrait HT01 Ceramic Pink Rose Gold ‚Äî 49‚ÄØ900 ‚ÇΩ</option>
    <option value="49900">Dyson AirStrait HT01 Strawberry Bronze Pink ‚Äî 49‚ÄØ900 ‚ÇΩ</option>
   <optgroup label="–°—Ç–∞–π–ª–µ—Ä—ã Dyson">
    <option value="54900">Dyson HSO5 Airwrap Long Nickel Copper ‚Äî 54‚ÄØ900 ‚ÇΩ</option>
    <option value="54900">Dyson HSO5 Airwrap Long Blue blush ‚Äî 54‚ÄØ900 ‚ÇΩ</option>
    <option value="54900">Dyson HSO5 Airwrap Long Fuchsia Nickel ‚Äî 54‚ÄØ900 ‚ÇΩ</option>
    <option value="59900">Dyson HSO5 Airwrap Long Onyx Gold ‚Äî 59‚ÄØ900 ‚ÇΩ</option>
    <option value="59900">Dyson HSO5 Airwrap Long Diffuse volumise Blue Copper ‚Äî 59‚ÄØ900 ‚ÇΩ</option>
    <option value="59900">Dyson HS08 Airwrap ID Long Vinca blue topaz ‚Äî 59‚ÄØ900 ‚ÇΩ</option>
    <option value="64900">Dyson HS08 Airwrap ID Long Jasper Plum Purple ‚Äî 64‚ÄØ900 ‚ÇΩ</option>
  </optgroup>
</optgroup>
    </select>

    <label>–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞ (‚ÇΩ):</label>
    <input type="number" id="price" max="300000" value="10000" />
    <input type="range" id="priceRange" min="10000" max="300000" step="1000" value="10000" />

    <label>–ü–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å (‚ÇΩ):</label>
    <small style="align-self: flex-start; font-size: 12px; opacity: 0.8;">(–º–∏–Ω–∏–º—É–º 30% –æ—Ç —Å—É–º–º—ã)</small>
    <input type="number" id="down" value="3000" />
    <input type="range" id="downRange" min="0" max="300000" step="1000" value="3000" />
    <div id="downError" style="color: #ff8080; font-size: 13px; margin-top: 4px; display: none;">
  –ü–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 30% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞
</div>


    <label>–°—Ä–æ–∫ —Ä–∞—Å—Å—Ä–æ—á–∫–∏ (–º–µ—Å.):</label>
    <input type="number" id="months" min="1" max="12" value="6" />
    <input type="range" id="monthsRange" min="1" max="12" value="6" />

    <div class="result" id="resultBox"></div>

    <a class="whatsapp-button" id="whatsappLink" href="#" target="_blank">
      –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" />
    </a>
  </div>

  <script>
    function getMonthlyRate(months) {
      return months <= 6 ? 0.06 : 0.07;
    }

    function format(num) {
      const rounded = Math.round(num / 10) * 10;
      return rounded.toLocaleString('ru-RU');
    }

    function unformat(str) {
      return parseFloat(str.toString().replace(/\s/g, '')) || 0;
    }

    function updateSliderBackground(slider) {
      const val = (slider.value - slider.min) / (slider.max - slider.min) * 100;
      slider.style.background = `linear-gradient(to right, #e8d7c9 0%, #e8d7c9 ${val}%, rgba(232,215,201,0.3) ${val}%, rgba(232,215,201,0.3) 100%)`;
    }

    function sync(slider, input, resetProduct = false) {
      const update = () => {
        const rawValue = unformat(input.value);
        slider.value = rawValue;
        if (resetProduct) document.getElementById('product').value = "";
        updateSliderBackground(slider);
        validateDown();
        calc();
        updateWhatsAppLink();
      };
      slider.addEventListener('input', () => {
        input.value = slider.value;
        if (resetProduct) document.getElementById('product').value = "";
        updateSliderBackground(slider);
        validateDown();
        calc();
        updateWhatsAppLink();
      });
      input.addEventListener('input', update);
      input.addEventListener('blur', () => {
        input.value = format(unformat(input.value));
      });
      updateSliderBackground(slider);
    }

    function validateDown() {
      const price = unformat(document.getElementById('price').value);
      const down = document.getElementById('down');
      const downRange = document.getElementById('downRange');
      if (!isNaN(price)) {
        const min = 0;
        const max = price;
        down.min = min;
        down.max = max;
        downRange.min = min;
        downRange.max = max;

        if (parseFloat(down.value) < min) {
          down.value = min;
          downRange.value = min;
        }

        updateSliderBackground(downRange);
      }
    }

    function calc() {
      const price = unformat(document.getElementById('price').value);
      const down = unformat(document.getElementById('down').value);
      const months = parseInt(document.getElementById('months').value);
      const box = document.getElementById('resultBox');
      if (!price || !down || !months || down >= price) {
        box.innerHTML = '';
        return;
      }
      const rate = getMonthlyRate(months);
      const credit = price - down;
      const total = credit * (1 + rate * months);
      const monthly = total / months;
      const overpay = total - credit;
      const fullTotal = total + down;
      box.innerHTML = `
        <p><strong>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂:</strong> ${format(monthly)} ‚ÇΩ</p>
        <p><strong>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</strong> ${format(fullTotal)} ‚ÇΩ</p>
        <p><strong>–¢–æ—Ä–≥–æ–≤–∞—è –Ω–∞—Ü–µ–Ω–∫–∞:</strong> ${format(overpay)} ‚ÇΩ</p>
      `;
    }

    const price = document.getElementById('price');
    const priceRange = document.getElementById('priceRange');
    const down = document.getElementById('down');
    const downRange = document.getElementById('downRange');
    const months = document.getElementById('months');
    const monthsRange = document.getElementById('monthsRange');
    const whatsappLink = document.getElementById('whatsappLink');
    const productSelect = document.getElementById('product');

    document.getElementById('product').addEventListener('change', (e) => {
      if (e.target.value) {
        price.value = e.target.value;
        priceRange.value = e.target.value;
        updateSliderBackground(priceRange);
        validateDown();
        calc();
        updateWhatsAppLink();
      }
    });

    sync(priceRange, price, true);
    sync(downRange, down);
    sync(monthsRange, months);

    function updateWhatsAppLink() {
      const productText = productSelect.options[productSelect.selectedIndex]?.text || '';
      const downPayment = unformat(document.getElementById('down').value);
      const monthsValue = document.getElementById('months').value;
      const price = unformat(document.getElementById('price').value);

      const minDown = price * 0.3;
      const errorBox = document.getElementById('downError');
      if (!productText || downPayment < minDown || !monthsValue) {
    whatsappLink.href = "#";
    if (downPayment < minDown) {
        errorBox.style.display = "block";
    } else {
        errorBox.style.display = "none";
    }
    return;
}
errorBox.style.display = "none";


      const rate = getMonthlyRate(parseInt(monthsValue));
      const credit = price - downPayment;
      const total = credit * (1 + rate * monthsValue);
      const monthly = total / monthsValue;
      const fullTotal = total + downPayment;

      const message = `–ê—Å —Å–∞–ª–∞–º—É –∞–ª–∞–π–∫—É–º! –•–æ—á—É –æ—Ñ–æ—Ä–º–∏—Ç—å —Ä–∞—Å—Å—Ä–æ—á–∫—É:\n\nüì± –¢–æ–≤–∞—Ä: ${productText}\nüí∞ –ü–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å: ${format(downPayment)} ‚ÇΩ\nüìÜ –°—Ä–æ–∫: ${monthsValue} –º–µ—Å.\nüì§ –ü–ª–∞—Ç—ë–∂ –≤ –º–µ—Å—è—Ü: ${format(monthly)} ‚ÇΩ\nüí≥ –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${format(fullTotal)} ‚ÇΩ`;

      const encodedMessage = encodeURIComponent(message);
      whatsappLink.href = `https://wa.me/79627721490?text=${encodedMessage}`;
    }

    updateWhatsAppLink();
  </script>
</body>
</html>
